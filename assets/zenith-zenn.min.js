/**
 * Combined and Minified JavaScript for Zenith Zenn Website
 */
document.addEventListener('DOMContentLoaded',()=>{initHeroSection();initProductCards();initScrollAnimations();initStatisticsCounter();initTestimonialCarousel();initScrollToTop();initStickyAddToCart();initEnhancedParallax();initHeaderScroll();initSmoothScrollWithOffset();initScrollFadeEffects();initFaqAccordion();initQuizModal();});function initHeroSection(){setTimeout(()=>{const e=document.querySelector('.hero-section');e&&e.classList.add('loaded')},100)}function initProductCards(){const e=document.querySelectorAll('.add-to-cart-btn');e.forEach(t=>{t.addEventListener('click',e=>{e.preventDefault();const n=document.createElement('span');n.classList.add('ripple'),t.appendChild(n);const o=t.getBoundingClientRect(),a=1.8*Math.max(o.width,o.height);n.style.width=`${a}px`,n.style.height=`${a}px`,n.style.left=`${e.clientX-o.left-a/2}px`,n.style.top=`${e.clientY-o.top-a/2}px`,t.classList.add('success');const i=t.querySelector('.btn-text')?.textContent;i&&(t.querySelector('.btn-text').textContent='Added!'),setTimeout(()=>{n.remove(),setTimeout(()=>{t.classList.remove('success'),i&&(t.querySelector('.btn-text').textContent=i)},800)},500);const l=document.querySelector('.cart-count');l&&(l.textContent=(parseInt(l.textContent,10)||0)+1,l.style.animation='pulseCart 0.3s ease-out',setTimeout(()=>l.style.animation='',300))})})}const styleSheet=document.styleSheets[0];try{styleSheet.insertRule('@keyframes pulseCart{0%{transform:scale(1)}50%{transform:scale(1.2)}100%{transform:scale(1)}}',styleSheet.cssRules.length)}catch(e){console.warn("Could not insert keyframes for cart pulse:",e)}function initScrollAnimations(){const e=document.querySelectorAll('.fade-in'),t=document.querySelectorAll('.trust-badge'),n=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add('visible'),n.unobserve(e.target))})},{threshold:.1}),o=new IntersectionObserver(e=>{e.forEach((e,t)=>{e.isIntersecting&&(setTimeout(()=>{e.target.classList.add('visible')},100*t),o.unobserve(e.target))})},{threshold:.1});e.forEach(e=>{n.observe(e)}),t.forEach(e=>{o.observe(e)})}function initStatisticsCounter(){const e=document.querySelectorAll('.statistic-item'),t=new IntersectionObserver(n=>{n.forEach(n=>{if(n.isIntersecting){const o=n.target.querySelector('.statistic-value');if(!o||o.classList.contains('animated'))return;o.classList.add('animated');const a=parseInt(o.getAttribute('data-value'),10),i=1800,l=performance.now();o.textContent='0%';const c=e=>{const t=e-l,n=Math.min(t/i,1),s=1-Math.pow(1-n,3);o.textContent=Math.floor(s*a)+'%',n<1&&requestAnimationFrame(c)};requestAnimationFrame(c),t.unobserve(n.target)}})},{threshold:.4});e.forEach(e=>{t.observe(e)})}function initTestimonialCarousel(){const e=document.querySelectorAll('.testimonial-slide'),t=document.querySelectorAll('.testimonial-dot');if(e.length<=1)return;let n=0,o;const a=t=>{e.forEach((e,n)=>{e.classList.toggle('active',n===t)}),t.forEach((e,n)=>{e.classList.toggle('active',n===t)})},i=()=>{n=(n+1)%e.length,a(n)},l=()=>{clearInterval(o),o=setInterval(i,5e3)};a(0),l(),t.forEach((e,t)=>{e.addEventListener('click',()=>{n=t,a(n),l()})});const c=document.querySelector('.testimonial-carousel');c&&(c.addEventListener('mouseenter',()=>clearInterval(o)),c.addEventListener('mouseleave',l))}function initScrollToTop(){const e=document.querySelector('.scroll-to-top');e&&(window.addEventListener('scroll',()=>{window.pageYOffset>300?e.classList.add('visible'):e.classList.remove('visible')},{passive:!0}),e.addEventListener('click',()=>{window.scrollTo({top:0,behavior:'smooth'})}))}function initStickyAddToCart(){const e=document.querySelector('.sticky-add-to-cart');if(!e||window.innerWidth>=768)return;let t=window.scrollY,n=!1;const o=()=>{const a=document.querySelector('.product'),i=document.querySelector('footer');if(!a||!i)return void e.classList.remove('visible');const l=a.getBoundingClientRect(),c=i.getBoundingClientRect();e.classList.toggle('visible',l.bottom<window.innerHeight&&c.top>window.innerHeight),n=!1};window.addEventListener('scroll',()=>{t=window.scrollY,n||(window.requestAnimationFrame(()=>{o()}),n=!0)},{passive:!0}),o()}function initLazyLoading(){if('loading'in HTMLImageElement.prototype){const e=document.querySelectorAll('img[loading="lazy"]');e.forEach(e=>{e.dataset.src&&(e.src=e.dataset.src)})}else{const e=new IntersectionObserver((t,n)=>{t.forEach(t=>{if(t.isIntersecting){const o=t.target;o.dataset.src&&(o.src=o.dataset.src),o.classList.remove('lazy'),e.unobserve(o)}})});document.querySelectorAll('img.lazy').forEach(t=>{e.observe(t)})}}initLazyLoading();function initEnhancedParallax(){const e=document.querySelector('.hero-section'),t=document.querySelector('.hero-image');e&&t&&(setTimeout(()=>{t.style.transform='scale(1.02) translateY(-5px)',setTimeout(()=>{t.style.transition='transform 0.8s ease'},500)},300),window.addEventListener('scroll',()=>{const n=window.scrollY,o=e.offsetHeight;n<=o&&(t.style.transform=`scale(1.02) translateY(${-5+n*.15}px)`)},{passive:!0}));const n=document.querySelector('.discover-section'),o=document.querySelector('.discover-image img');if(!n||!o)return;let a=!1;const i=()=>{const e=window.scrollY,t=n.getBoundingClientRect(),l=window.innerHeight;t.top<l&&t.bottom>0&&(o.style.transform=`translateY(${(l-t.top)/(l+t.height)-.5*-40}px)`),a=!1};window.addEventListener('scroll',()=>{a||(window.requestAnimationFrame(i),a=!0)},{passive:!0}),i()}function initHeaderScroll(){const e=document.querySelector('header');if(!e)return;const t=()=>{window.scrollY>30?(e.classList.add('scrolled'),e.style.backgroundColor='rgba(57, 68, 80, 0.98)',e.style.boxShadow='0 5px 20px rgba(0, 0, 0, 0.1)'):(e.classList.remove('scrolled'),e.style.backgroundColor='',e.style.boxShadow='')};window.addEventListener('scroll',t,{passive:!0}),t()}function initSmoothScrollWithOffset(){const e=document.querySelectorAll('a[href^="#"]:not([href="#"])');e.forEach(e=>{e.addEventListener('click',t=>{t.preventDefault();const n=e.getAttribute('href'),o=document.querySelector(n);o&&window.scrollTo({top:o.getBoundingClientRect().top+window.pageYOffset-(document.querySelector('header')?.offsetHeight||0)-20,behavior:'smooth'})})})}function initScrollFadeEffects(){const e=document.querySelectorAll('.fade-in'),t=document.querySelectorAll('.trust-badge'),n=document.querySelectorAll('.brand-value-item'),o=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(setTimeout(()=>{e.target.classList.add('visible')},100),o.unobserve(e.target))})},{threshold:.15,rootMargin:'0px 0px -50px 0px'}),a=new IntersectionObserver(e=>{e.forEach((e,t)=>{e.isIntersecting&&(setTimeout(()=>{e.target.classList.add('visible')},100+120*t),a.unobserve(e.target))})},{threshold:.2,rootMargin:'0px 0px -50px 0px'}),i=new IntersectionObserver(e=>{e.forEach((e,t)=>{e.isIntersecting&&(setTimeout(()=>{e.target.classList.add('visible')},100+150*t),i.unobserve(e.target))})},{threshold:.15,rootMargin:'0px 0px -50px 0px'});e.forEach(e=>{o.observe(e)}),t.forEach(e=>{a.observe(e)}),n.forEach(e=>{i.observe(e)})}function initFaqAccordion(){const e=document.querySelectorAll('.faq-question');e.forEach(t=>{t.addEventListener('click',function(){const n=this.nextElementSibling;this.classList.contains('active');document.querySelectorAll('.faq-question.active').forEach(e=>{if(e!==this){const t=e.nextElementSibling;e.classList.remove('active'),t.style.maxHeight=null,t.classList.remove('active')}}),this.classList.toggle('active'),this.classList.contains('active')?(n.style.maxHeight=n.scrollHeight+"px",n.classList.add('active')):(n.style.maxHeight=null,n.classList.remove('active'))})}),window.addEventListener('resize',()=>{document.querySelectorAll('.faq-question.active').forEach(e=>{const t=e.nextElementSibling;t&&(t.style.maxHeight=t.scrollHeight+"px")})})}function initQuizModal(){const e=document.getElementById('open-quiz-btn'),t=document.getElementById('quiz-modal'),n=document.querySelector('.quiz-close-btn');e.addEventListener('click',function(){t.style.display='flex'}),n.addEventListener('click',function(){t.style.display='none'})}